import{r as s,c as y,d as $,j as e,u as v,b as T,e as F,f as M}from"./index-CQ3Qke6f.js";function q(l,t,c){return l.some(i=>i.homeId===t&&i.awayId===c||i.homeId===c&&i.awayId===t)}function H(l,t){return l===t}const I=s.memo(function({tournamentId:t,participantLabel:c,theme:i="clean",showFlagInput:u=!1,countriesList:d}){const x=y(),[r,g]=s.useState(""),[o,b]=s.useState(""),p=s.useCallback(n=>{n.preventDefault(),r.trim()&&(x($({tournamentId:t,participant:{id:`${t}-${Date.now()}`,name:r.trim(),...o.trim()&&{flag:o.trim()}}})),g(""),b(""))},[x,t,r,o]),f=s.useCallback(n=>{g(n.target.value)},[]),j=s.useCallback(n=>{const m=d?.find(h=>h.name===n.target.value);m&&(g(m.name),b(m.flag))},[d]),N=s.useCallback(n=>{b(n.target.value)},[]);return e.jsxs("form",{className:`add-participant-form add-participant-form--${i}`,onSubmit:p,children:[e.jsxs("h3",{children:["Add ",c]}),e.jsxs("div",{className:"form-group",children:[d?e.jsxs("select",{value:r,onChange:j,className:"form-select",required:!0,children:[e.jsxs("option",{value:"",children:["Select ",c]}),d.map(n=>e.jsxs("option",{value:n.name,children:[n.flag," ",n.name]},n.name))]}):e.jsxs(e.Fragment,{children:[u&&e.jsx("input",{type:"text",value:o,onChange:N,placeholder:"ðŸ‡«ðŸ‡·",className:"form-input form-input--flag",maxLength:4}),e.jsx("input",{type:"text",value:r,onChange:f,placeholder:`${c} Name`,className:"form-input",required:!0})]}),e.jsx("button",{type:"submit",className:"form-button",children:"Add"})]})]})}),R=s.memo(function({tournamentId:t,scoreLabel:c,theme:i="clean"}){const u=y(),d=v(a=>T(a,t)),x=v(a=>a.tournaments.tournaments[t]?.matches||[]),[r,g]=s.useState(""),[o,b]=s.useState(""),[p,f]=s.useState(""),[j,N]=s.useState(""),[n,m]=s.useState(""),h=s.useMemo(()=>d.length<2,[d.length]),w=s.useCallback(a=>{if(a.preventDefault(),m(""),!r||!o){m("Please select both participants");return}if(H(r,o)){m("A participant cannot play against itself");return}if(q(x,r,o)){m("These participants have already played");return}const _=parseInt(p),S=parseInt(j);if(isNaN(_)||isNaN(S)||_<0||S<0){m("Please enter valid scores");return}u(F({tournamentId:t,match:{id:`${t}-match-${Date.now()}`,homeId:r,awayId:o,homeScore:_,awayScore:S,playedAt:Date.now()}})),g(""),b(""),f(""),N("")},[u,t,r,o,p,j,x]),A=s.useCallback(a=>{g(a.target.value)},[]),k=s.useCallback(a=>{b(a.target.value)},[]),D=s.useCallback(a=>{f(a.target.value)},[]),P=s.useCallback(a=>{N(a.target.value)},[]);return e.jsxs("form",{className:`add-match-form add-match-form--${i}`,onSubmit:w,children:[e.jsx("h3",{children:c}),h&&e.jsx("p",{className:"form-warning",children:"Add at least 2 participants to record matches"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("select",{value:r,onChange:A,className:"form-select",disabled:h,required:!0,children:[e.jsx("option",{value:"",children:"Home Team"}),d.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),e.jsxs("select",{value:o,onChange:k,className:"form-select",disabled:h,required:!0,children:[e.jsx("option",{value:"",children:"Away Team"}),d.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("input",{type:"number",value:p,onChange:D,placeholder:"Home Score",className:"form-input",min:"0",disabled:h,required:!0}),e.jsx("input",{type:"number",value:j,onChange:P,placeholder:"Away Score",className:"form-input",min:"0",disabled:h,required:!0})]}),n&&e.jsx("p",{className:"form-error",children:n}),e.jsx("button",{type:"submit",className:"form-submit",disabled:h,children:c})]})}),C=s.memo(({participant:l,showIcons:t})=>e.jsxs("tr",{className:"standings-table__row",children:[e.jsxs("td",{className:"standings-table__cell standings-table__cell--name",children:[l.flag&&e.jsx("span",{className:"flag-emoji",children:l.flag}),l.name]}),e.jsx("td",{className:"standings-table__cell",children:l.stats.played}),e.jsxs("td",{className:"standings-table__cell",children:[l.stats.wins,t&&l.stats.wins>0?e.jsx("span",{className:"icon-success",children:"âœ“"}):null]}),!t&&e.jsx("td",{className:"standings-table__cell",children:l.stats.draws}),e.jsxs("td",{className:"standings-table__cell",children:[l.stats.losses,t&&l.stats.losses>0?e.jsx("span",{className:"icon-error",children:"âœ•"}):null]}),e.jsx("td",{className:"standings-table__cell standings-table__cell--points",children:l.stats.points})]}));C.displayName="StandingsRow";const B=s.memo(function({tournamentId:t,theme:c="clean",showIcons:i=!1}){const u=v(d=>M(d,t));return u.length===0?e.jsx("div",{className:`standings-table standings-table--${c}`,children:e.jsx("p",{className:"empty-state",children:"No participants yet. Add some to get started!"})}):e.jsx("div",{className:`standings-table standings-table--${c}`,children:e.jsxs("table",{className:"standings-table__table",children:[e.jsx("thead",{className:"standings-table__table-thead",children:e.jsxs("tr",{className:"standings-table__row",children:[e.jsx("th",{className:"standings-table__header",children:c==="table"?"Player":"Team"}),e.jsx("th",{className:"standings-table__header",children:c==="table"?"M":"P"}),e.jsx("th",{className:"standings-table__header",children:"W"}),!i&&e.jsx("th",{className:"standings-table__header",children:"D"}),e.jsx("th",{className:"standings-table__header",children:"L"}),e.jsx("th",{className:"standings-table__header",children:"Pts"})]})}),e.jsx("tbody",{className:"standings-table__table-tbody",children:u.map(d=>e.jsx(C,{participant:d,showIcons:i},d.id))})]})})});export{I as A,B as S,R as a};
